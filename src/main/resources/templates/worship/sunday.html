<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>설교 영상 보기</title>
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
</head>
<body>
<h1 id="video_title">설교 영상</h1>
<div id="video_url"></div>

<script>
    function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
    }

    function load_video_detail(id) {
        $.ajax({
            url: `/api/worship/detail?id=${id}`,
            type: "GET",
            success: (video) => {
                $("#video_title").text(video.title);
                $("#video_url").html(`<iframe width="560" height="315" src="https://www.youtube.com/embed/${video.vId}" frameborder="0" allowfullscreen></iframe>`);
            },
            error: (xhr, status, error) => {
                alert("영상을 불러오는 데 실패했습니다.");
            }
        });
    }

    // 페이지 로드 시 영상 상세 정보 불러오기
    $(document).ready(function() {
        const videoId = getQueryParam("id");
        if (videoId) {
            load_video_detail(videoId);
        } else {
            alert("잘못된 접근입니다.");
        }
    });
</script>
</body>
</html>
